$(document).ready(function(){function s(){if(n.valid()){var t=n.serializeFormToObject();abp.ui.setBusy(n);f.updatePersonalDetail(t).done(function(){abp.notify.info(i("SavedSuccessfully"))}).always(function(){abp.ui.clearBusy(n)})}}function h(n){n.length>=1&&$.each(n,function(n,t){try{var r=new FormData,u=$("#profilePhotoControl");r.append("image",t);r.append("IsDeleteOld",!0);r.append("businessEntityId",u.attr("data-businessEntityId"));r.append("businessDocumentId",u.attr("data-businessDocumentId"));r.append("documentTypeId",u.attr("data-documentTypeId"));$.ajax({url:"/admin/document/upload",data:r,processData:!1,contentType:!1,type:"POST",success:function(n){n.success?abp.notify.info(i("SavedSuccessfully")):abp.notify.info(i("Error"))},error:function(){abp.notify.info(i("Error"))}})}catch(f){console.log(f.message)}})}var f=abp.services.app.user,i=abp.localization.getSource("AliFitnessAE"),e=$("#UserTrackingProfileTable"),o=$("#UserTrackingProfileSearchForm"),n=$("#formPersonalDetailProfile"),u,t,r;o.attr("autocomplete","off");n.attr("autocomplete","off");n.find(".save-button").click(function(n){n.preventDefault();s()});u=function(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$(".profile-user-img").attr("src",n.target.result)};t.readAsDataURL(n.files[0]);h(n.files)}};$(".file-upload").on("change",function(){u(this)});$(".upload-button").on("click",function(){$(".file-upload").click()});t={buttons:[],responsive:!1};r=e.DataTable(t);$("#profile-tracking-tabs a").off().on("click",function(n){var u,i;n.preventDefault();u="vert-tabs-profile-body";$("#"+u).html("");i=$("#userTrackingProfileSearchForm").serializeFormToObject(!0);i.chartType=i.userTrackingProfileChartType;i.bodyPart=$(this).attr("data-bodyPart");i.measurementScaleLKDId=$(".ddl_ProfileTrackingScale").find(":selected").val();i.loadDiv=u;r=loadViewComponentUserTracking(i,"UserTrackingProfileTable",t);$(this).tab("show")});$(document).on("click",".btn-search-userTracking-profile",n=>{var f,i,e,u,o;n.preventDefault();f="vert-tabs-profile-body";$("#profile-tracking-tabs a").each(function(){$(this).removeClass("active")});$("#"+f).html("");i=$("#userTrackingProfileSearchForm").serializeFormToObject(!0);u=$("#profile-tracking-tabs").find("a:first");u.addClass("active");i.chartType=i.userTrackingProfileChartType;i.bodyPart=u.attr("data-bodyPart");i.measurementScaleLKDId=u.attr("data-measurementScale");i.loadDiv=f;r=loadViewComponentUserTracking(i,"UserTrackingProfileTable",t);e="tab-profile-picture-trackingContent";$("profile-picture-trackingContent .tab-pane").each(function(){$(this).empty()});$("#profile-picture-tracking-tabs a").each(function(){$(this).removeClass("active")});$("#"+e).html("");u=$("#profile-picture-tracking-tabs").find("a:first");u.addClass("active");i.documentType=u.attr("data-doc-type");o=u.attr("data-BusinessEntityId");loadComponentView(e,"PhotoTracking","PhotoTracking",o,i,"_ProfilePhotoTracking")});$(document).on("change",".ddl_ProfileTrackingScale",function(){var i=$("#profile-tracking-tabs a.active"),n=$("#userTrackingProfileSearchForm").serializeFormToObject(!0);n.chartType=n.userTrackingProfileChartType;n.bodyPart=i.attr("data-bodyPart");n.measurementScaleLKDId=$(".ddl_ProfileTrackingScale").find(":selected").val();n.loadDiv="vert-tabs-profile-body";r=loadViewComponentUserTracking(n,"UserTrackingProfileTable",t);i.tab("show")});$("#profile-picture-tracking-tabs a").click(function(n){var t,i,r,u;n.preventDefault();t="tab-profile-picture-trackingContent";$("profile-picture-trackingContent .tab-pane").each(function(){console.log("clearing "+$(this).attr("id")+" tab");$(this).empty()});i=$("#userTrackingProfileSearchForm").serializeFormToObject(!0);$("#"+t).html("");r=$(this).attr("data-doc-type");i.documentType=r;u=$(this).attr("data-BusinessEntityId");loadComponentView(t,"PhotoTracking","PhotoTracking",u,i,"_ProfilePhotoTracking");$(this).tab("show")});loadGallery(!0,"a.thumbnail")});