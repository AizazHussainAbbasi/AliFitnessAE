(function(n){function o(n,t){abp.message.confirm(abp.utils.formatString(i("AreYouSureWantToDelete"),t),null,t=>{t&&f.delete({id:n}).done(()=>{abp.notify.info(i("SuccessfullyDeleted")),u.ajax.reload()})})}var f=abp.services.app.topic,i=abp.localization.getSource("AliFitnessAE"),r=n("#TopicCreateModal"),t=r.find("form").attr("autocomplete","off"),e=n("#TopicTable"),u=e.DataTable({scrollY:"300px",scrollX:!0,scrollCollapse:!0,processing:!0,responsive:!1,paging:!0,serverSide:!0,ordering:!1,ajax:function(t,i){var r=n("#TopicSearchForm").serializeFormToObject(!0);r.maxResultCount=t.length;r.skipCount=t.start;abp.ui.setBusy(e);f.getAll(r).done(function(n){i({recordsTotal:n.totalCount,recordsFiltered:n.totalCount,data:n.items})}).always(function(){abp.ui.clearBusy(e)})},buttons:[{name:"refresh",text:'<i class="fas fa-redo-alt"><\/i>',action:()=>u.draw(!1)}],responsive:{details:{type:"column"}},columnDefs:[{targets:0,data:null,sortable:!1,autoWidth:!1,defaultContent:"",render:(n,t,r)=>{var u="";return u+=`<div class="btn-group">`,u+=`<button class="btn-primary dropdown-toggle" type="button" data-toggle="dropdown"  aria-haspopup="true" aria-expanded="false">`,u+=i("Actions"),u+=`<span class="caret"></span>`,u+=`</button>`,u+=`<div class="dropdown-menu">`,u+=`<a class="dropdown-item edit-Topic" data-Topic-id="${r.id}" data-toggle="modal" data-target="#TopicEditModal"> ${i("Edit")}</a>`,u+=`<a class="dropdown-item delete-Topic" data-Topic-id="${r.id}" data-Topic-name="${r.topicConst}"> ${i("Delete")}</a>`,u+=`</div>`,u+`</div>`}},{targets:1,data:"topicConst",sortable:!1},{targets:2,data:"title",sortable:!1},{targets:3,data:"published",sortable:!1},{targets:4,data:"incluedInTopMenu",sortable:!1}]});t.find(".save-button").on("click",e=>{if(e.preventDefault(),t.valid()){var o=t.serializeFormToObject();o.Published=t.find(n("input[name=Published]")).is(":checked");o.IncluedInTopMenu=t.find(n("input[name=IncluedInTopMenu]")).is(":checked");o.IncluedInFooterColumn1=t.find(n("input[name=IncluedInFooterColumn1]")).is(":checked");o.IncluedInFooterColumn2=t.find(n("input[name=IncluedInFooterColumn2]")).is(":checked");o.IncluedInFooterColumn3=t.find(n("input[name=IncluedInFooterColumn3]")).is(":checked");abp.ui.setBusy(r);f.create(o).done(function(){r.modal("hide");t[0].reset();abp.notify.info(i("SavedSuccessfully"));u.ajax.reload()}).always(function(){abp.ui.clearBusy(r)})}});n(document).on("click",".delete-Topic",function(){var t=n(this).attr("data-Topic-id"),i=n(this).attr("data-Topic-name");o(t,i)});n(document).on("click",".edit-Topic",function(t){var i=n(this).attr("data-Topic-id");t.preventDefault();abp.ajax({url:abp.appPath+"Admin/Topic/EditModal?TopicId="+i,type:"POST",dataType:"html",success:function(t){n("#TopicEditModal div.modal-content").html(t)},error:function(){}})});abp.event.on("Topic.edited",()=>{u.ajax.reload()});r.on("shown.bs.modal",()=>{r.find("input:not([type=hidden]):first").focus()}).on("hidden.bs.modal",()=>{t.clearForm()});n(".btn-search").on("click",()=>{u.ajax.reload()});n(".txt-search").on("keypress",n=>{if(n.which==13)return u.ajax.reload(),!1});n(".addRichTextControl").richText()})(jQuery);