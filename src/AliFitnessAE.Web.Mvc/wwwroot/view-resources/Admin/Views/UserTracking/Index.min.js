(function(n){function c(){if(r.valid()){var n=r.serializeFormToObject();n.id=n.addedUserTrackingId;n.userId=n.addUserTrackingUserId;abp.ui.setBusy(r);e.update(n).done(function(){abp.notify.info(t("SavedSuccessfully"));abp.event.trigger("userTracking.added",n)}).always(function(){abp.ui.clearBusy(r)})}}function l(n,i){abp.message.confirm(abp.utils.formatString(t("AreYouSureWantToDelete"),i),null,i=>{i&&e.delete({id:n}).done(()=>{abp.notify.info(t("SuccessfullyDeleted")),u.ajax.reload()})})}function a(n,i){var f="",r={};r.id=n;r.isApprove=i;f=r.isApprove?t("SuccessfullyApproved"):t("SuccessfullyUnApprove");e.updateUserTrackingStatus(r).done(()=>{abp.notify.info(f),u.ajax.reload()})}var e=abp.services.app.userTracking,s=abp.services.app.lookup,t=abp.localization.getSource("AliFitnessAE"),f=n("#UserTrackingCreateModal"),r=f.find("form").attr("autocomplete","off"),o=n("#UserTrackingTable"),h=n("#UserTrackingSearchForm"),i={},u=o.removeAttr("width").DataTable({scrollY:"300px",scrollX:!0,scrollCollapse:!0,paging:!0,serverSide:!1,processing:!0,responsive:!1,order:[[2,"desc"]],ajax:function(n,t){var r=h.serializeFormToObject(!0);s.getMeasurementScaleComboboxItems().done(function(u){i=u.items;r.maxResultCount=n.length;r.skipCount=n.start;r.userId=r.searchFormUserList;r.isApproved=getParameterByName("isApproved");abp.ui.setBusy(o);e.getAllUserTrackingPagedResult(r).done(function(n){t({recordsTotal:n.totalCount,recordsFiltered:n.totalCount,data:n.items})}).always(function(){abp.ui.clearBusy(o)})})},buttons:[{name:"refresh",text:'<i class="fas fa-redo-alt"><\/i>',action:()=>u.draw(!1)}],columnDefs:[{targets:0,data:null,sortable:!1,autoWidth:!1,defaultContent:"",render:(n,i,r)=>{var u="";return u+=`<div class="btn-group">`,u+=`<button class="btn-primary dropdown-toggle" type="button" data-toggle="dropdown"  aria-haspopup="true" aria-expanded="false">`,u+=t("Actions"),u+=`<span class="caret"></span>`,u+=`</button>`,u+=`<div class="dropdown-menu">`,r.status.statusConst=="Approved"?isAdminLoggedIn?(u+=`<a class="dropdown-item edit-userTracking" data-userTracking-id="${r.id}" class="dropdown-item">${t("Edit")}</a>`,u+=`<a class="dropdown-item delete-userTracking" data-userTracking-id="${r.id}" data-userTracking-name="${moment(r.creationTime).format("MMMM Do YYYY")}">${t("Delete")}</a>`,u+=`<a class="dropdown-item update-userTracking-status" data-userTracking-id="${r.id}" data-userTracking-status="false" data-toggle="tooltip" data-placement="right"  title="${t("UnApproveStatusToolTip")}">${t("UnApprove")}</a>`):u+=`<a class="dropdown-item edit-userTracking" data-userTracking-id="${r.id}" class="dropdown-item">${t("Detail")}</a>`:(u+=`<a class="dropdown-item edit-userTracking" data-userTracking-id="${r.id}" class="dropdown-item">${t("Edit")}</a>`,u+=`<a class="dropdown-item delete-userTracking" data-userTracking-id="${r.id}" data-userTracking-name="${moment(r.creationTime).format("MMMM Do YYYY")}">${t("Delete")}</a>`,isAdminLoggedIn&&(u+=`<a class="dropdown-item update-userTracking-status" data-userTracking-id="${r.id}" data-userTracking-status="true" data-toggle="tooltip" data-placement="right"  title="${t("ApproveStatusToolTip")}">${t("Approve")}</a>`)),u+=`</div>`,u+`</div>`}},{targets:1,data:"user",render:(n,t,i)=>i.user.fullName},{targets:2,data:"date",render:(n,t,i)=>moment(i.creationTime).format("MMMM Do YYYY")},{targets:3,data:"date",render:(n,i,r)=>{var u="p-1 ";return u=r.status.statusConst=="Approved"?u+"label bg-green":u+"label bg-warning",[`   <span class="${u}">`,`    ${t(r.status.statusConst)}`,"   <\/span>"].join("")}},{targets:4,data:"height",render:(n,t,r)=>{var u=i.find(n=>n.value==r.heightLkdId);return r.height+" "+u.displayText}},{targets:5,data:"weight",render:(n,t,r)=>{var u=i.find(n=>n.value==r.weightLkdId);return r.weight+" "+u.displayText}},{targets:6,data:"hip",render:(n,t,r)=>{var u=i.find(n=>n.value==r.hipLkdId);return r.hip+" "+u.displayText}},{targets:7,data:"bellyButtonWaist",render:(n,t,r)=>{var u=i.find(n=>n.value==r.bellyButtonWaistLkdId);return r.bellyButtonWaist+" "+u.displayText}},{targets:8,data:"hipBoneWaist",render:(n,t,r)=>{var u=i.find(n=>n.value==r.hipBoneWaistLkdId);return r.hipBoneWaist+" "+u.displayText}},{targets:9,data:"chest",render:(n,t,r)=>{var u=i.find(n=>n.value==r.chestLkdId);return r.chest+" "+u.displayText}},{targets:10,data:"rightArm",render:(n,t,r)=>{var u=i.find(n=>n.value==r.rightArmLkdId);return r.rightArm+" "+u.displayText}},{targets:11,data:"leftArm",render:(n,t,r)=>{var u=i.find(n=>n.value==r.leftArmLkdId);return r.leftArm+" "+u.displayText}},{targets:12,data:"rightThigh",render:(n,t,r)=>{var u=i.find(n=>n.value==r.rightThighLkdId);return r.rightThigh+" "+u.displayText}},{targets:13,data:"leftThigh",render:(n,t,r)=>{var u=i.find(n=>n.value==r.leftThighLkdId);return r.leftThigh+" "+u.displayText}},{targets:14,data:"rightCalve",render:(n,t,r)=>{var u=i.find(n=>n.value==r.rightCalveLkdId);return r.rightCalve+" "+u.displayText}},{targets:15,data:"leftCalve",render:(n,t,r)=>{var u=i.find(n=>n.value==r.leftCalveLkdId);return r.leftCalve+" "+u.displayText}},{targets:16,data:"rightForeArm",render:(n,t,r)=>{var u=i.find(n=>n.value==r.rightForeArmLkdId);return r.rightForeArm+" "+u.displayText}},{targets:17,data:"leftForeArm",render:(n,t,r)=>{var u=i.find(n=>n.value==r.leftForeArmLkdId);return r.leftForeArm+" "+u.displayText}},{targets:18,data:null,sortable:!1,autoWidth:!1,defaultContent:"",render:(n,i,r)=>{var u=[],f="";return r.status.statusConst=="Approved"?(f=isAdminLoggedIn?"fas fa-pencil-alt":"fas fa-eye",u[0]=`<span type='button' class="edit-userTracking" data-userTracking-id="${r.id}"><i class="${f}"></i></span>' `,isAdminLoggedIn&&(u[2]=`  &nbsp | &nbsp `,u[3]=` <span type='button' class="delete-userTracking" data-userTracking-id="${r.id}" data-userTracking-name="${moment(r.creationTime).format("MMMM Do YYYY")}"><i class="fas fa-trash"></i></span>`,u[4]=`  &nbsp | &nbsp `,u[5]=` <span type='button' class="update-userTracking-status" data-userTracking-id="${r.id}" data-userTracking-status="false" data-toggle="tooltip" data-placement="right"  title="${t("UnApproveStatusToolTip")}"><i class="fas fa-times"></i></span>`)):(f="fas fa-pencil-alt",u[0]=`  <span type='button' class="edit-userTracking" data-userTracking-id="${r.id}"> <i class="${f}"></i></span>' `,u[1]=`  &nbsp | &nbsp `,u[2]=`  <span type='button' class="delete-userTracking" data-userTracking-id="${r.id}" data-userTracking-name="${moment(r.creationTime).format("MMMM Do YYYY")}"><i class="fas fa-trash"></i></span>`,isAdminLoggedIn&&(u[3]=`  &nbsp | &nbsp `,u[4]=` <span type='button' class="update-userTracking-status" data-userTracking-id="${r.id}" data-userTracking-status="true" data-toggle="tooltip" data-placement="right"  title="${t("ApproveStatusToolTip")}"><i class="fas fa-thumbs-up"></i></i></span>`)),u.join("")}}]});n('a[data-toggle="tab"]').on("shown.bs.tab",function(){n(n.fn.dataTable.tables(!0)).DataTable().columns.adjust()});r.find(".save-button").on("click",i=>{if(i.preventDefault(),r.valid()){var o=r.serializeFormToObject();o.userId=o.addUserTrackingUserId;n("#addedUserTrackingId").val()>0?c():(abp.ui.setBusy(f),e.createUserTracking(o).done(function(i){n("#addedUserTrackingId").val(i.id);f.modal("hide");abp.notify.info(t("SavedSuccessfully"));u.ajax.reload()}).always(function(){abp.ui.clearBusy(f)}))}});n(document).on("click",".delete-userTracking",function(){var t=n(this).attr("data-userTracking-id"),i=n(this).attr("data-userTracking-name");l(t,i)});n(document).on("click",".update-userTracking-status",function(){var t=n(this).attr("data-userTracking-id"),i=n(this).attr("data-userTracking-status");a(t,i)});n(document).on("click",".edit-userTracking",function(t){var i=n(this).attr("data-userTracking-id");t.preventDefault();abp.ui.setBusy(o);abp.ajax({url:abp.appPath+"Admin/userTracking/EditModal?userTrackingId="+i,type:"POST",dataType:"html"}).done(function(t){n("#devEditModal").html(t);n("#UserTrackingEditModal").modal("show").find("label").addClass("active")}).fail(function(n){errorHandler(n)}).always(function(){abp.ui.clearBusy(o)})});abp.event.on("userTracking.edited",()=>{u.ajax.reload()});abp.event.on("userTracking.added",()=>{u.ajax.reload()});f.on("shown.bs.modal",()=>{f.find("input:not([type=hidden]):first").focus()}).on("hidden.bs.modal",()=>{r.clearForm(),r.find("label").removeClass("active"),n("#addedUserTrackingId").val(""),n("#create-tracking-photo").html("")});n(".btn-search").on("click",()=>{u.ajax.reload()});n(".txt-search").on("keypress",n=>{if(n.which==13)return u.ajax.reload(),!1});n("#SearchFormUserList").select2({});n("#SearchFromDate,#SearchToDate").datepicker({format:"mm/dd/yyyy",clearBtn:!0,endDate:"+0d"})})(jQuery);